@let _errors = errors();

@if (loadingPage()) {
  <p>Loading filters and list...</p>
} @else if (_errors.length > 0) {
  <div class="error-list">
    @for (err of _errors; track $index) {
      <p class="error">{{ err }}</p>
    }
  </div>
} @else {
  <form (submit)="performSearch($event)">
    <app-hideout-list-filters
      [base-data]="filtersBaseData()"
      [filters]="filters()"
      (updated)="updateFilters($event)"
    />
    <button class="search-btn" matButton="filled" type="submit">Search</button>
  </form>

  @if (!loadingList()) {
    @let _hideouts = clientHideoutList();

    @if (!_hideouts) {
      <p>No hideouts available</p>
    } @else {
      <div class="hideout-list-container">
        <ul class="hideout-list">
          @for (hideout of _hideouts; track hideout.guid) {
            <li class="hideout-item"><app-hideout-card [hideout]="hideout" /></li>
          }
        </ul>
        <app-pagination-control
          [currentPage]="currentClientPage()"
          (pageChanged)="handlePageChange($event)"
          [totalPages]="clientPageCount()"
        />
      </div>
    }
  }
}
